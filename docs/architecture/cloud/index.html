<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/documentation/blog/rss.xml" title="New Normal Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/documentation/blog/atom.xml" title="New Normal Blog Atom Feed"><title data-react-helmet="true">Cloud Architecture | New Normal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://CS203-G1.github.io/documentation/docs/architecture/cloud"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Cloud Architecture | New Normal"><meta data-react-helmet="true" name="description" content="Deployment Diagram"><meta data-react-helmet="true" property="og:description" content="Deployment Diagram"><link data-react-helmet="true" rel="shortcut icon" href="/documentation/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://CS203-G1.github.io/documentation/docs/architecture/cloud"><link data-react-helmet="true" rel="alternate" href="https://CS203-G1.github.io/documentation/docs/architecture/cloud" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://CS203-G1.github.io/documentation/docs/architecture/cloud" hreflang="x-default"><link rel="stylesheet" href="/documentation/assets/css/styles.a7f3719c.css">
<link rel="preload" href="/documentation/assets/js/runtime~main.5184f79e.js" as="script">
<link rel="preload" href="/documentation/assets/js/main.02598848.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><img src="/documentation/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/documentation/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">CS203 G1T1</b></a><a class="navbar__item navbar__link" href="/documentation/docs/getting-started/roster-service">Guide</a><a class="navbar__item navbar__link" href="/documentation/docs/roster-service/company">API Reference</a><a class="navbar__item navbar__link" href="/documentation/docs/dev-ops/ecs">Deployment Guide</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/architecture/cloud">Design and Architecture</a><a class="navbar__item navbar__link" href="/documentation/docs/gui/user-management/pre-login">GUI and Design</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Architecture</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documentation/docs/architecture/cloud">Cloud Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/architecture/microservice">Microservice Pattern</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/architecture/faas">Functions as a Service</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Database</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cloud Architecture</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="deployment-diagram"></a>Deployment Diagram<a class="hash-link" href="#deployment-diagram" title="Direct link to heading">#</a></h3><p><img alt="Diagram" src="/documentation/assets/images/architecture_diagram-e15d4bcc9bbabc9f2ee19ef95954a2eb.png">
<a href="https://app.diagrams.net/#G1Zng3hRo18A9IQyPTjcUSw1GeiGrXKw0I" target="_blank" rel="noopener noreferrer">Diagram Link</a></p><p>Note: Please contact <a href="https://github.com/bingyuyap" target="_blank" rel="noopener noreferrer">@bingyuyap</a> for access to the deployment diagram.</p><header><h1>Design decisions</h1></header><p>We are designing our solution to meet <a href="http://iso25000.com/index.php/en/iso-25000-standards/iso-25010" target="_blank" rel="noopener noreferrer">ISO25000</a> requirements as close as possible. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="amazon-web-services"></a>Amazon Web Services<a class="hash-link" href="#amazon-web-services" title="Direct link to heading">#</a></h2><p>We decided to host the software project on AWS Cloud Services as this software is meant to used by many companies in Singapore. In time to come, we want to scale to other countries as well where COVID-19 has impacted not just Singapore. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="api-gateway"></a>API Gateway<a class="hash-link" href="#api-gateway" title="Direct link to heading">#</a></h3><p>As we are developing this product in less than 3 months, our team&#x27;s software engineers need a way to manage the APIs. API Gateway is a fully managed service that makes it easy for us to create, publish, maintain, and monitor. Not just that, API Gateway also automatically secures our API endpoints as we are able to authorize access to your APIs with AWS Identity and Access Management (IAM) and Amazon Cognito.</p><p>With the fully managed API Gateway and Docusaurus, communication gap is minimized between the Front End, Back End and Dev Ops team. Hence, improving efficiency and effectiveness of our development. </p><p>Furthermore, we want to scale to other devices, not just web browsers. We will be able to easily develop mobile application without much modification to the backend services. In other words, API Gateway increases the software maintainability as each service is loosely coupled with their on responsibilities distinguished properly. </p><p>With API Gateway, we are able to increase the Security, Scalability and Maintainability of our software.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="application-load-balancer-and-auto-scaling-group"></a>Application Load Balancer and Auto Scaling Group<a class="hash-link" href="#application-load-balancer-and-auto-scaling-group" title="Direct link to heading">#</a></h3><p>Using Application Load Balancer, we are able to direct traffic to Fargate instances that are able to meet the workload requirements. Together with the auto-scaling group, we are able to scale up and down to meet the current workload requirements. This increases the availability of the services as auto-scaling (as the name suggests) scales our instances automatically to handle traffic at all times. </p><p>Speaking of auto-scaling, it is most cost effective than manual scaling since it dynamically increases and decreases capacity as needed. When workload is low, like during night time, instances that are not used are terminated. </p><p>With that our software is more fault tolerant too, where failover is done with replicas as AWS detects an unhealthy instance. This explains the need for the <code>/health</code> endpoint configured in our Spring Boot components    </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aws-fargate-for-roster-analytics-and-scraper"></a>AWS Fargate for Roster, Analytics and Scraper<a class="hash-link" href="#aws-fargate-for-roster-analytics-and-scraper" title="Direct link to heading">#</a></h3><p>Instead of EC2, Fargate is used as the software will not be run 24/7. With Fargate, we can scale up during the day and scale down during the night. While EC2 is more suitable for constant, large workloads like processing transactions or some sort. </p><p>You may also question the previous statement since we want to scale to other countries where they are operating at a different timezone, so there is possibility where there is a constant workload on our architecture. To address that, there is multiple regions and availability zones for AWS services. We can easily rebuild the services using the images in ECR for these other regions. Say we want to launch this product in the US, we would not want them to use the instance available in Singapore. We ideally should launch the instances as close as possible to our US users where they can experience minimized latency.</p><p>Why not Lambda, why Fargate? You may ask. It&#x27;s because we need to develop Spring Boot projects and dockerize them for this module. That&#x27;s why. Jokes aside, we speculate that this software will be used consistently during day time - especially office hours. Lambda is more commonly used when the workload is not as consistent and is more burstable / unpredictable.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aws-lambda-for-auto-scheduler-and-approval-functions"></a>AWS Lambda for Auto Scheduler and Approval Functions<a class="hash-link" href="#aws-lambda-for-auto-scheduler-and-approval-functions" title="Direct link to heading">#</a></h3><p>Now why are we using Lambda for Approvals? Approving requests like Vaccination verification, leave request and etc are a very one-off thing. We think it is an overkill to have a Fargate instance just for this functionality. For Auto Scheduler, it runs only once in a while (every week or every 2 weeks). In other words, its a time-driven function. Similarly, we do not require a container as a service just for this simple function.</p><p>Why do you see 2 Lambda Services instead of one? One of them is a driver function, think of it as a <code>public static void main</code> in Java. What the driver does is to be run once every week. This function will query all the work locations and all the employees in each work location and then pass these data to the second Lambda Service. This second Lambda will be doing the scheduling for each work location. </p><p>Here, we are making use of the auto-scaling feature of AWS Lambda provides. So, we will have multiple instances scheduling for each work location concurrently instead of having each job run one after another.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aws-relational-database-service"></a>AWS Relational Database Service<a class="hash-link" href="#aws-relational-database-service" title="Direct link to heading">#</a></h3><p>RDS is used for both staging and production databases. For staging, it reduces the need for the Front End team to run all 3 databases and all 3 services on their local machine just to be able to integrate with the backend services. Backend engineers do not need to run migration on their local databases too.</p><p>For production, reasons like RDS being highly scalable, available and durable are the main reasons that we are using this service. We will also be launching read replicas to offload the master database and also acts as a failover plan when one database is unavailable. We are also able to shard the database logically using companies if we ever serve a company with large number of employees.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aws-cognito"></a>AWS Cognito<a class="hash-link" href="#aws-cognito" title="Direct link to heading">#</a></h3><p>AWS Cognito is used as service to manage our userpools, providing authentication and authorisation capabilities. We decided to use cognito as it provides us with industry standard security features such as OAuth 2.0, SAML 2.0, and OpenID Connect out of the box. It also provides us with an SDK to be used with the Sprintboot backend and the Javascript frontend, easing and speeding up the development process. </p><p>AWS cognito stores a user pool for us, with the details of the user. Since it is stored and managed by AWS, we can be ensured that is is encrypted with industry standards and will be highly scalable. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aws-amplify"></a>AWS Amplify<a class="hash-link" href="#aws-amplify" title="Direct link to heading">#</a></h3><p>AWS Amplify serves as a SDK provider, and a hosting service for the Nextjs React frontend. By using the Amplify SDK, we will be able to connect to AWS cognito and configured Lambda functions easily. AWS Amplify provides a CI/CD pipeline for its hosting service, and automates the generation and allocating of the SSL certification. These features would increase the security and the ease of the development and deployment of the frontend.</p><p>In the view of scalability, AWS Amplify comes packaged with AWS Cloudfront which is a Cloud Delivery Network (CDN) service. This would provide both performance and security to the web application. Performance is optimised with reduced latency and optimised querying of data due to AWS&#x27;s large number of Points of Presence. Security is boosted the use of AWS Web Application Firewall and AWS Shield. They provide access control, and protect against potential DDoS attacks.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/documentation/docs/architecture/microservice"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Microservice Pattern Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deployment-diagram" class="table-of-contents__link">Deployment Diagram</a></li><li><a href="#amazon-web-services" class="table-of-contents__link">Amazon Web Services</a><ul><li><a href="#api-gateway" class="table-of-contents__link">API Gateway</a></li><li><a href="#application-load-balancer-and-auto-scaling-group" class="table-of-contents__link">Application Load Balancer and Auto Scaling Group</a></li><li><a href="#aws-fargate-for-roster-analytics-and-scraper" class="table-of-contents__link">AWS Fargate for Roster, Analytics and Scraper</a></li><li><a href="#aws-lambda-for-auto-scheduler-and-approval-functions" class="table-of-contents__link">AWS Lambda for Auto Scheduler and Approval Functions</a></li><li><a href="#aws-relational-database-service" class="table-of-contents__link">AWS Relational Database Service</a></li><li><a href="#aws-cognito" class="table-of-contents__link">AWS Cognito</a></li><li><a href="#aws-amplify" class="table-of-contents__link">AWS Amplify</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation/docs/getting-started/intro">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/documentation/assets/js/runtime~main.5184f79e.js"></script>
<script src="/documentation/assets/js/main.02598848.js"></script>
</body>
</html>